<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Log In â€“ Quizio</title>

<meta name="description" content="Log in to Quizio to create and manage educational games.">
<meta name="theme-color" content="#0b57d0">

<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Nunito:wght@400;500;600&display=swap" rel="stylesheet">
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
:root{
  --blue-main:#0b57d0;
  --blue-light:#1e88ff;
  --blue-soft:#eaf2ff;
  --text-dark:#1f2937;
  --text-muted:#6b7280;
  --border-soft:#e5e7eb;
  --error:#e63946;
  --radius-lg:22px;
  --radius-md:16px;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#f9fafb;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Nunito',sans-serif;
}
.login-card{
  background:#fff;
  width:100%;
  max-width:420px;
  padding:36px;
  border-radius:var(--radius-lg);
  border:1px solid var(--border-soft);
}
h1{
  text-align:center;
  font-family:'Fredoka',sans-serif;
  margin-bottom:24px;
}
label{
  font-weight:600;
  font-size:14px;
  display:block;
  margin-bottom:6px;
}
.input-group{
  margin-bottom:18px;
}
.input-group input{
  width:100%;
  height:48px;
  border-radius:var(--radius-md);
  border:1px solid var(--border-soft);
  padding:0 16px;
  font-size:15px;
}
.input-group input:focus{
  outline:none;
  border-color:var(--blue-light);
  box-shadow:0 0 0 3px var(--blue-soft);
}
.error-text{
  color:var(--error);
  font-size:13px;
  margin-top:6px;
  display:none;
}
.login-btn{
  width:100%;
  height:52px;
  background:var(--blue-main);
  border:none;
  border-radius:999px;
  color:#fff;
  font-family:'Fredoka',sans-serif;
  font-size:18px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
}
.login-btn.loading{
  opacity:.7;
  pointer-events:none;
}
.spinner{
  width:18px;
  height:18px;
  border:3px solid rgba(255,255,255,.4);
  border-top-color:#fff;
  border-radius:50%;
  animation:spin .8s linear infinite;
  display:none;
}
.login-btn.loading .spinner{display:block}
.login-btn.loading span{display:none}
@keyframes spin{to{transform:rotate(360deg)}}
.divider{
  height:1px;
  background:var(--border-soft);
  margin:22px 0;
}
.provider-btn{
  width:100%;
  height:48px;
  border-radius:var(--radius-md);
  border:1px solid var(--border-soft);
  background:#fff;
  font-family:'Fredoka',sans-serif;
  cursor:pointer;
  margin-bottom:12px;
}
.provider-btn:hover{background:var(--blue-soft)}
.signup-text{
  text-align:center;
  font-size:14px;
  margin-top:18px;
}
.signup-text a{
  color:var(--blue-main);
  font-weight:600;
  text-decoration:none;
}
</style>
</head>

<body>

<div class="login-card">
  <h1>Log In</h1>

  <form id="loginForm">
    <label>Email</label>
    <div class="input-group">
      <input type="email" id="email" required>
      <div class="error-text" id="emailError"></div>
    </div>

    <label>Password</label>
    <div class="input-group">
      <input type="password" id="password" required>
      <div class="error-text" id="passwordError"></div>
    </div>

    <button class="login-btn" id="loginBtn">
      <span>Log In</span>
      <div class="spinner"></div>
    </button>
  </form>

  <div class="divider"></div>

  <button class="provider-btn" id="googleLogin">
    Continue with Google
  </button>

  <div class="signup-text">
    New to Quizio? <a href="signup.html">Create an account</a>
  </div>
</div>

<script>
/* ðŸ” SUPABASE SETUP */
const supabase = window.supabase.createClient(
  "https://vobglhlucwodmlzphmvc.supabase.co",
  "YOUR_PUBLIC_ANON_KEY"
);

/* Redirect if already logged in */
(async()=>{
  const { data:{ user } } = await supabase.auth.getUser();
  if(user) location.href="dashboard.html";
})();

const form = document.getElementById("loginForm");
const btn = document.getElementById("loginBtn");

form.onsubmit = async e => {
  e.preventDefault();
  btn.classList.add("loading");

  const { error } = await supabase.auth.signInWithPassword({
    email: email.value.trim(),
    password: password.value
  });

  btn.classList.remove("loading");

  if(error){
    passwordError.textContent = error.message;
    passwordError.style.display = "block";
    return;
  }

  location.href = "dashboard.html";
};

googleLogin.onclick = async ()=>{
  await supabase.auth.signInWithOAuth({
    provider:"google",
    options:{ redirectTo: location.origin + "/dashboard.html" }
  });
};
</script>

</body>
</html>
